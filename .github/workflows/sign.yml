name: Daily Auto Sign

on:
  schedule:
    # 主签到预热：UTC 22:57/22:58/22:59 == 北京 06:57/06:58/06:59
    - cron: "57 22 * * *"
    - cron: "58 22 * * *"
    - cron: "59 22 * * *"

    # 补签：UTC 23:05/23:15/23:30 == 北京 07:05/07:15/07:30
    - cron: "5 23 * * *"
    - cron: "15 23 * * *"
    - cron: "30 23 * * *"

  workflow_dispatch: {}

jobs:
  sign:
    runs-on: ubuntu-latest
    timeout-minutes: 10

    steps:
      - uses: actions/checkout@v4

      - uses: actions/setup-python@v5
        with:
          python-version: "3.11"
          cache: "pip"

      - name: Install deps
        run: |
          python -m pip install --upgrade pip
          pip install requests

      - name: Run
        env:
          MY_COOKIE: ${{ secrets.MY_COOKIE }}
        run: |
          python -u sign.py
